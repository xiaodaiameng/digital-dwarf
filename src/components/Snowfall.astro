<canvas id="snow-canvas" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 9999;
"></canvas>

<script is:inline>
// 在组件最前面添加调试代码
// console.log("Snowfall component loaded");
// if (typeof window === 'undefined') {
//   console.log("Running on server, skipping snow effect");
// } else {
//   console.log("Running on client, should initialize snow");
// }
if (typeof window !== 'undefined') {
  const canvas = document.getElementById('snow-canvas');
  const ctx = canvas.getContext('2d');
  let width = window.innerWidth;
  let height = window.innerHeight;
  
  // 雪花数组
  const flakes = Array.from({length: 60}, () => ({
    x: Math.random() * width,
    y: Math.random() * -height,
    size: Math.random() * 4 + 2,
    speed: Math.random() * 1 + 0.8,
    sway: Math.random() * 2 - 1
  }));

  function update() {
    ctx.clearRect(0, 0, width, height);
    
    flakes.forEach(flake => {
      flake.y += flake.speed;
      flake.x += flake.sway;
      
      if (flake.y > height) {
        flake.y = -flake.size;
        flake.x = Math.random() * width;
      }
      
      ctx.beginPath();
      ctx.arc(flake.x, flake.y, flake.size, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 255, 255, ${flake.size / 6})`;
      ctx.fill();
    });
    
    requestAnimationFrame(update);
  }

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }

  window.addEventListener('resize', resize);
  resize();
  update();
}
</script>